plugins {
    id "com.android.application"
    id "org.jetbrains.kotlin.android"
    id "dev.flutter.flutter-gradle-plugin"
}

android {
    // ✅ ΒΑΛΕ εδώ το δικό σου namespace (ό,τι είχες ήδη)
    namespace "gr.ns.osm_navigator_ultra"

    compileSdk 34

    defaultConfig {
        applicationId "gr.ns.osm_navigator_ultra"
        // Αν το έχεις στο παλιό σου αρχείο, κράτα την ίδια τιμή εδώ:
        // applicationId "com.example.app"

        minSdk 21
        targetSdk 34

        // Αν χρησιμοποιείς androidx.multidex, ξεσχολίασε:
        // multiDexEnabled true
        versionCode 1
        versionName "1.0"
    }

    buildTypes {
        release {
            // 🔧 Η σωστή ρύθμιση για να μην ξαναβγάλει το σφάλμα:
            // Ενεργοποιούμε R8 (code shrinking) ΚΑΙ resource shrinking
            minifyEnabled true
            shrinkResources true

            // Default κανόνες + το δικό μας proguard αρχείο
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'),
                          'proguard-rules.pro'

            // Υπογραφή (προαιρετική). Αν έχεις δική σου, κράτησέ τη όπως ήταν.
            // signingConfig signingConfigs.release
        }

        debug {
            // Συνήθως δεν κάνουμε shrink στο debug
            minifyEnabled false
            shrinkResources false
        }
    }

    // AGP 8.x / Kotlin 2.x -> Java 17 target
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlinOptions {
        jvmTarget = '17'
    }

    // Αν έχεις assets/flutter ρυθμίσεις ή ndk/cmake, κράτησέ τες όπως ήταν.
    // packagingOptions μπορεί να μείνει κενό.
    packagingOptions {
        // examples (άφησέ το κενό αν δεν χρειάζεται)
        // resources {
        //     excludes += [ "META-INF/*" ]
        // }
    }
}

// Το Flutter plugin φορτώνει τα απαραίτητα tasks.
// Μην αλλάζεις κάτι άλλο εδώ.
